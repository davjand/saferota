<ion-view class="rota-timespan-view">
	<ion-nav-title>{{vm.rota.label}}</ion-nav-title>
	<ion-nav-buttons side="secondary">
		<button class="button" ng-click="vm.change()">Change</button>
	</ion-nav-buttons>
	<ion-content>
		<div class="no-data-wrapper"
			 ng-if="vm.logs.length < 1">
			<div class="icon-top ion-ios-clock-outline"></div>
			<h3>No Logs Generated</h3>
			<h4>When we've logged your shifts they will appear here.</h4>
			<p>
				<a ui-sref="app.view.events({rotaId: vm.rota.getKey()})">
					If you thing there should be some here, please visit Settings / Event Log and contact support
				</a>
			</p>
		</div>
		<ion-list>
			<div ng-repeat="week in vm.logs">
				<ion-item ng-if="week.items.length > 0"
						  class="item-divider">
					{{vm.moment(week.start).format('ddd Do')}}

					<span> to </span>
					{{vm.moment(week.end).format('Do MMM YY')}}
				</ion-item>

				<ion-item ng-repeat="timespan in week.items"
						  class="item-timespan item-icon-right"
						  ui-sref="app.view.logs-edit({timespanId: timespan.getKey()})">

					<div class="duration">
						<span ng-bind-html="timespan.duration | formatHoursMinutes"></span>
					</div>
					<div class="info">
						<h2>
							{{vm.moment(timespan.enter).format('dddd Do')}}
						</h2>
						<p>
							{{timespan.enter | date : 'HH:mm'}}
							<i class="icon ion-ios-arrow-thin-right"></i>
							{{timespan.exit | date : 'HH:mm'}}
						</p>
					</div>
					<i class="icon ion-ios-arrow-right"></i>

					<ion-option-button class="button-assertive"
									   ng-click="vm.remove(timespan)">
						Delete
					</ion-option-button>

				</ion-item>

			</div>

		</ion-list>


	</ion-content>
</ion-view>